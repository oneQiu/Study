## 2023-06-12

### 如何封装组件，需要考虑哪些方面？

组件封装是前端开发当中非常重要的一环，合理的封装能提高代码复用性、维护性以及可拓展性，在封装组件的时候我们需要明确组件的核心功能，我们需要尽量将多变的属性进行配置化，提高灵活性，组件支持二次封装，尽量做到视图和逻辑的拆分。

### 对称加密和非对称加密

在加密算法当中，对称加密和非对称加密是两个非常常见的加密算法。
首先对称加密指的是加解密所使用的密钥是一样的，所以需要注意密钥的存放。而非对称加密采用的是一对多密钥的形式，公钥加密私钥解密，对此我们不需要关心公钥的安全问题，通常用来向服务端发送加密信息使用。但是非对称加密比对称加密消耗更多的性能，所以会更久一些。
在实际项目上一般会采用混合加密的方式保证安全性以及速度。
混合加密：使用非对称加密对对称加密对密钥进行加密

### 什么是负载均衡

一般来说前端去对后端发起请求都是固定的域名或者`IP`，随着请求量的增加，单个服务器必然是无法满足需求，所以负载均衡出现了，它能够将客户端的请求分发到多个服务器上面，提高系统性能以及稳定性。

### 解释以下代码执行结果

```javascript
async function async1() {
	console.log('async1 start');
	await async2();
	console.log('async1 end');
}
async function async2() {
	console.log('async2');
	await console.log('ing');
}
async1();
console.log('start');
```

打印结果：`async1 start > async2 > pending > start > async1 end`
`async`是`ES6`新引入的异步解决方案，可以将当前函数使用同步的执行方式去执行，特别注意`await`会将后续的逻辑转为一个微任务（不包括`await`所在语句），所以出现了`async1 end`在`start`后面的情况。

## 2023-06-13

### 浏览器事件循环的方式

我们知道`JS`是一门单线程非阻塞的语言，为此它需要有一套特殊的事件处理机制来解决异步任务，即事件循环`Event Loop`。
`JS`引擎在执行代码时会分为同步任务以及异步任务，在遇到同步任务的时候会将其推入执行栈当中执行，而异步任务则会进行一个消息队列的执行机制当中。
异步任务在以往中都划分为宏任务和微任务，但是在目前复杂都浏览器环境当中已经无法满足了，宏任务会根据自己不同任务进入到不同的任务队列当中，例如定时器任务、请求任务、IO 任务等。
当执行栈执行完同步任务以后，就会把微任务队列任务推入到消息队列当中，然后进入执行栈执行。等到清空微任务队列以后，`JS`引擎会检查是否需要进行渲染任务，这也是像`Vue React`等框架采用该方式，能够有效的利用浏览器性能。
然后开始执行宏任务，由于并没有一定的标准规范，所以不同浏览器下面宏任务的队列优先级不同，进入消息队列，推入执行栈，当前循环结束。

### 性能优化

如果说一个项目能正常运行是下限，那么性能优化即为上限，良好的性能优化可以有效的提高用户体验以及系统的健壮性。
性能优化可以根据环境分为开发优化以及体验优化，开发优化即我们在开发阶段能提高我们开发效率的，例如`webpack`的热更新、资源缓存、`dll`动态链接库等。
生产环境的性能优化我们可以从两大方面入手：一、网络层面，首次进入用户的感受就是网络，我们可以根据`TCP`的三次握手来获取灵感，如：`DNS`预解析、合并请求、`HTTP`缓存、采用`CDN`技术等
二、体验优化，优化交互、例如懒加载、动态路由、图片格式转换。服务端渲染我们在使用的时候通常是为了`SEO`或首屏直出，性能倒是次要，他只是把客户端的压力集中到了服务端。减少重绘回流以及`DOM`操作、防抖节流。
性能优化是重要一环，检测也是必不可少的，我们需要学会使用各种检测工具以及日志监控，例如`Performance LightHouse`面板以及`window.performance`对象（可以获取到各种耗时）。

### 讲一下`vdom`和`diff`

`vdom`和`diff`是`react vue`等框架的重要核心概念，用来实现高效的页面渲染和更新，核心就是减少`DOM`操作，避免重绘回流。
`vdom`也叫做`虚拟DOM`，本质上是对象，它模拟了真实的`DOM`节点，在进行多次操作以后通过`diff`调整的变更，再将其进行渲染，让开发者专注于底层实现上，数据驱动视图，毕竟在内存上操作对象比操作`DOM`成本低的多的多。
`diff`是实现的核心算法，通过比对新旧对象不同，生成一组最小的渲染变更操作，`diff`算法通常包含以下几个步骤：

1. 遍历新旧节点，获取不同
2. 生成最小操作
3. 更新在真实`DOM`

### `webpack`的核心是什么
> `webpack`的核心是模块化，它把项目中的所有资源都看作一个一个的模块，然后将模块打包到一个或多个的文件结果。比较重要的几个点是`loader`和`plugins`，因为`webpack`其实只能执行`js`，所以像一些其他的文件类型都是需要`loader`来做转换，而`plugins`则是一个在打包整个流程可以注册钩子的功能，能帮我们在打包后做一些处理和优化，比如文件的复制、静态资源的模版、按需加载的功能。